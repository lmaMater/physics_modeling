<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Электрогенератор</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<h1>Электрогенератор</h1>

<!-- Ввод параметров -->
<form id="paramsForm">
    <label for="magneticField">Магнитное поле (Тл):            </label>
    <input type="number" step="0.01" min="0" id="magneticField" value="1.0">
    <br>
    <label for="rotationFrequency">Частота вращения (Гц):      </label>
    <input type="number" step="0.01" min="0" id="rotationFrequency" value="1.0">
    <br>
    <label for="circuitResistance">Сопротивление контура (Ом): </label>
    <input type="number" step="0.01" min="0.01" id="circuitResistance" value="0.5">
    <br>
    <button type="submit">Обновить (Enter)</button>
</form>

<!-- Графики -->
<div id="plots"></div>

<script>
    function updatePlots(event) {
        event.preventDefault();
        
        const magneticField = parseFloat(document.getElementById("magneticField").value);
        const rotationFrequency = parseFloat(document.getElementById("rotationFrequency").value);
        const circuitResistance = parseFloat(document.getElementById("circuitResistance").value);
        
        generatePlots(magneticField, rotationFrequency, circuitResistance);
    }
    
    function generatePlots(magneticField, rotationFrequency, circuitResistance) {
        const time = Array.from({length: 1000}, (_, i) => i / 100);

        // ЭДС
        const emf = time.map(t => 2 * Math.PI * rotationFrequency * magneticField * Math.cos(2 * Math.PI * rotationFrequency * t));
        // Индукционный ток
        const current = emf.map(e => e / circuitResistance);
        
        const emfTrace = {
            x: time,
            y: emf,
            mode: 'lines',
            name: 'ЭДС (В)'
        };

        const currentTrace = {
            x: time,
            y: current,
            mode: 'lines',
            name: 'Ток (А)'
        };

        const layout = {
            title: 'Графики зависимости ЭДС и индукционного тока от времени',
            xaxis: {
                title: 'Время (с)'
            },
            yaxis: {
                title: 'Значение'
            }
        };
        
        Plotly.newPlot('plots', [emfTrace, currentTrace], layout);
    }
    
    document.getElementById("paramsForm").addEventListener("submit", updatePlots);
    
    generatePlots(1.0, 1.0, 0.5);
</script>

</body>
</html>
